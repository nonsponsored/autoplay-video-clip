export class VideoClip{constructor(t){window.addEventListener("load",()=>{t.prop&&window.matchMedia("(prefers-reduced-motion: no-preference)").matches||(this.container=t,this.picture=this.container.querySelector("picture"),this.video=this.container.querySelector("video"),this.videoDesc=this.video.getAttribute("data-video-desc"),this.videosrc=this.video.querySelector("source"),this.datasrc=this.videosrc.getAttribute("data-src"),this._init())})}_init(){this.clipControl=document.createElement("button"),this.clipControl.setAttribute("type","button"),this.clipControl.setAttribute("aria-live","assertive"),this.clipControl.classList.add("video-clip-control"),this.clipControl.textContent="Pause "+this.videoDesc,this.container.appendChild(this.clipControl),this.picture.setAttribute("aria-hidden","true"),this.videosrc.setAttribute("src",this.datasrc),this.videosrc.removeAttribute("data-src"),this.container.classList.add("js-videoClip--active"),this.video.load(),this._addEventListeners()}_addEventListeners(){this.video.addEventListener("transitionend",()=>{this.video.play()}),this.clipControl.addEventListener("click",()=>{this.video.paused||this.video.ended?(this.clipControl.classList.remove("video-clip-control--play"),this.clipControl.classList.remove("video-clip-control--replay"),this.clipControl.textContent="Pause "+this.videoDesc,this.video.play()):(this.clipControl.classList.add("video-clip-control--play"),this.clipControl.textContent="Play "+this.videoDesc,this.video.pause())}),this.video.addEventListener("ended",()=>{this.clipControl.classList.add("video-clip-control--replay"),this.clipControl.textContent="Replay "+this.videoDesc})}}